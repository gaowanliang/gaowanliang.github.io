<!DOCTYPE html>
<html lang="zh-cn" dir="ltr" class="scroll-smooth" data-default-appearance="light"
  data-auto-appearance="true"><head>
  <meta charset="utf-8" />
  
  <meta http-equiv="content-language" content="zh-cn" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  
  <title>H.264帧编码原理简述 - 帧内编码和帧间编码 &middot; 高玩梁的博客</title>
  <meta name="title" content="H.264帧编码原理简述 - 帧内编码和帧间编码 &middot; 高玩梁的博客" />
  
  <meta name="description" content="一个记录灵感的地方" />
  <meta name="keywords" content="H264, 视频编码, 帧内编码, 帧间编码, " />
  
  
  <link rel="canonical" href="https://gwliang.com/posts/intra-prediction-and-inter-prediction/" />
  
  
  
  
  
  
  
  
  
  
  <link type="text/css" rel="stylesheet" href="/css/main.bundle.min.c9b6c5bad9d9b9a8f5b3bd6daf0b1c10c381f761b86dc05093ace16f3fdf1194cc780925f423b9d64a5e34aaf208419bef714c3e8da1939da826dbb870a6f072.css"
    integrity="sha512-ybbFutnZuaj1s71trwscEMOB92G4bcBQk6zhbz/fEZTMeAkl9CO51kpeNKryCEGb73FMPo2hk52oJtu4cKbwcg==" />
  
  
  <script type="text/javascript" src="/js/appearance.min.516a16745bea5a9bd011138d254cc0fd3973cd55ce6e15f3dec763e7c7c2c7448f8fe7b54cca811cb821b0c7e12cd161caace1dd794ac3d34d40937cbcc9ee12.js"
    integrity="sha512-UWoWdFvqWpvQERONJUzA/TlzzVXObhXz3sdj58fCx0SPj&#43;e1TMqBHLghsMfhLNFhyqzh3XlKw9NNQJN8vMnuEg=="></script>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <script defer type="text/javascript" id="script-bundle" src="/js/main.bundle.min.a2d78d78672e549fbfc972ece871725b5478ba0b65708dda20cb97ab80a865eae6d247e1b05a4aec6ebbf78647ec3233bad8b2609ed98eee53cd58aa17128bc7.js"
    integrity="sha512-oteNeGcuVJ&#43;/yXLs6HFyW1R4ugtlcI3aIMuXq4CoZerm0kfhsFpK7G6794ZH7DIzutiyYJ7Zju5TzViqFxKLxw==" data-copy="" data-copied=""></script>
  
  
  
  <script src="/lib/zoom/zoom.min.37d2094687372da3f7343a221a470f6b8806f7891aa46a5a03966af7f0ebd38b9fe536cb154e6ad28f006d184b294525a7c4054b6bbb4be62d8b453b42db99bd.js" integrity="sha512-N9IJRoc3LaP3NDoiGkcPa4gG94kapGpaA5Zq9/Dr04uf5TbLFU5q0o8AbRhLKUUlp8QFS2u7S&#43;Yti0U7QtuZvQ=="></script>
  
  
  
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
  <link rel="manifest" href="/site.webmanifest" />
  
  
  
  
  
  
  
  
  <meta property="og:url" content="https://gwliang.com/posts/intra-prediction-and-inter-prediction/">
  <meta property="og:site_name" content="高玩梁的博客">
  <meta property="og:title" content="H.264帧编码原理简述 - 帧内编码和帧间编码">
  <meta property="og:description" content="上回说了一些关于 MP4 的 H264 编码的内容，这次再来说说 H264 是如何实现这么高的压缩率的，这就不得不提到帧内编码和帧间编码，查了一下，全网可能没有我讲的这么详细的的了，而且几乎不包含任何复杂难懂的信息，读到就是赚到(*/ω＼*)">
  <meta property="og:locale" content="zh_cn">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-03-29T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-03-29T00:00:00+00:00">
    <meta property="article:tag" content="H264">
    <meta property="article:tag" content="视频编码">
    <meta property="article:tag" content="帧内编码">
    <meta property="article:tag" content="帧间编码">
    <meta property="og:image" content="https://gwliang.com/posts/intra-prediction-and-inter-prediction/cover.webp">

  
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="https://gwliang.com/posts/intra-prediction-and-inter-prediction/cover.webp">
  <meta name="twitter:title" content="H.264帧编码原理简述 - 帧内编码和帧间编码">
  <meta name="twitter:description" content="上回说了一些关于 MP4 的 H264 编码的内容，这次再来说说 H264 是如何实现这么高的压缩率的，这就不得不提到帧内编码和帧间编码，查了一下，全网可能没有我讲的这么详细的的了，而且几乎不包含任何复杂难懂的信息，读到就是赚到(*/ω＼*)">

  
  <script type="application/ld+json">
  [{
    "@context": "https://schema.org",
    "@type": "Article",
    "articleSection": "",
    "name": "H.264帧编码原理简述 - 帧内编码和帧间编码",
    "headline": "H.264帧编码原理简述 - 帧内编码和帧间编码",
    
    "abstract": "\u003cp\u003e上回说了一些关于 MP4 的 H264 编码的内容，这次再来说说 H264 是如何实现这么高的压缩率的，这就不得不提到帧内编码和帧间编码，查了一下，全网可能没有我讲的这么详细的的了，而且几乎不包含任何复杂难懂的信息，读到就是赚到(*\/ω＼*)\u003c\/p\u003e",
    "inLanguage": "zh-cn",
    "url" : "https:\/\/gwliang.com\/posts\/intra-prediction-and-inter-prediction\/",
    "author" : {
      "@type": "Person",
      "name": "高玩梁"
    },
    "copyrightYear": "2024",
    "dateCreated": "2024-03-29T00:00:00\u002b00:00",
    "datePublished": "2024-03-29T00:00:00\u002b00:00",
    
    "dateModified": "2024-03-29T00:00:00\u002b00:00",
    
    "keywords": ["H264","视频编码","帧内编码","帧间编码"],
    
    "mainEntityOfPage": "true",
    "wordCount": "5434"
  }]
  </script>


  
  
  <meta name="author" content="高玩梁" />
  
  
  
  <link href="https://gwliang.com" rel="me" />
  
  
  <link href="https://github.com/gaowanliang" rel="me" />
  
  
  <link href="https://twitter.com/gaowanliang" rel="me" />
  
  
  
  

<script src="/lib/jquery/jquery.slim.min.b0dca576e87d7eaa5850ae4e61759c065786cdb6489d68fcc82240539eebd5da522bdb4fda085ffd245808c8fe2acb2516408eb774ef26b5f6015fc6737c0ea8.js" integrity="sha512-sNylduh9fqpYUK5OYXWcBleGzbZInWj8yCJAU57r1dpSK9tP2ghf/SRYCMj&#43;KsslFkCOt3TvJrX2AV/Gc3wOqA=="></script>






















  
  



  
  
  <meta name="theme-color"/>
  
  
</head>
<body
  class="flex flex-col h-screen px-6 m-auto text-lg leading-7 max-w-7xl bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32 scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-400 dark:scrollbar-track-neutral-800 dark:scrollbar-thumb-neutral-600">
  <div id="the-top" class="absolute flex self-center">
    <a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600"
      href="#main-content"><span
        class="font-bold text-primary-600 ltr:pr-2 rtl:pl-2 dark:text-primary-400">&darr;</span>跳过正文</a>
  </div>
  
  
  <div class="min-h-[148px]"></div>
<div class="fixed inset-x-0 pl-[24px] pr-[24px]" style="z-index:100">
  <div id="menu-blur" class="absolute opacity-0 inset-x-0 top-0 h-full single_hero_background nozoom backdrop-blur-2xl shadow-2xl"></div>
  <div class="relative max-w-[64rem] ml-auto mr-auto">
    <div style="padding-left:0;padding-right:0;padding-top:2px;padding-bottom:3px"
    class="main-menu flex items-center justify-between px-4 py-6 sm:px-6 md:justify-start gap-x-3">
    
    <div class="flex flex-1 items-center justify-between">
        <nav class="flex space-x-3">

            
            <a href="/" class="text-base font-medium text-gray-500 hover:text-gray-900">高玩梁的博客</a>
            

        </nav>
        <nav class="hidden md:flex items-center gap-x-5 md:ml-12 h-12">

            
            
            
  <a href="/posts/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
    
    <p class="text-base font-medium" title="">
        文章
    </p>
</a>



            
            
  <a href="/tags/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
    
    <p class="text-base font-medium" title="Tags">
        标签
    </p>
</a>



            
            
  <a href="https://gwliang.com"  target="_blank"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
    
    <span >
        

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentColor" d="M172.5 131.1C228.1 75.51 320.5 75.51 376.1 131.1C426.1 181.1 433.5 260.8 392.4 318.3L391.3 319.9C381 334.2 361 337.6 346.7 327.3C332.3 317 328.9 297 339.2 282.7L340.3 281.1C363.2 249 359.6 205.1 331.7 177.2C300.3 145.8 249.2 145.8 217.7 177.2L105.5 289.5C73.99 320.1 73.99 372 105.5 403.5C133.3 431.4 177.3 435 209.3 412.1L210.9 410.1C225.3 400.7 245.3 404 255.5 418.4C265.8 432.8 262.5 452.8 248.1 463.1L246.5 464.2C188.1 505.3 110.2 498.7 60.21 448.8C3.741 392.3 3.741 300.7 60.21 244.3L172.5 131.1zM467.5 380C411 436.5 319.5 436.5 263 380C213 330 206.5 251.2 247.6 193.7L248.7 192.1C258.1 177.8 278.1 174.4 293.3 184.7C307.7 194.1 311.1 214.1 300.8 229.3L299.7 230.9C276.8 262.1 280.4 306.9 308.3 334.8C339.7 366.2 390.8 366.2 422.3 334.8L534.5 222.5C566 191 566 139.1 534.5 108.5C506.7 80.63 462.7 76.99 430.7 99.9L429.1 101C414.7 111.3 394.7 107.1 384.5 93.58C374.2 79.2 377.5 59.21 391.9 48.94L393.5 47.82C451 6.731 529.8 13.25 579.8 63.24C636.3 119.7 636.3 211.3 579.8 267.7L467.5 380z"/></svg>

  </span>


    </span>
    
    <p class="text-base font-medium" title="">
        
    </p>
</a>



            
            
  <a href="https://github.com/gaowanliang"  target="_blank"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
    
    <span >
        

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>

  </span>


    </span>
    
    <p class="text-base font-medium" title="">
        
    </p>
</a>



            
            
  <a href="https://twitter.com/gaowanliang"  target="_blank"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
    
    <span >
        

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>

  </span>


    </span>
    
    <p class="text-base font-medium" title="">
        
    </p>
</a>



            
            

            
<div>
  <div class="cursor-pointer flex items-center nested-menu">
    <span class="ltr:mr-1 rtl:ml-1">
      

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512">
    <path fill="currentColor" d="M0 128C0 92.7 28.7 64 64 64H256h48 16H576c35.3 0 64 28.7 64 64V384c0 35.3-28.7 64-64 64H320 304 256 64c-35.3 0-64-28.7-64-64V128zm320 0V384H576V128H320zM178.3 175.9c-3.2-7.2-10.4-11.9-18.3-11.9s-15.1 4.7-18.3 11.9l-64 144c-4.5 10.1 .1 21.9 10.2 26.4s21.9-.1 26.4-10.2l8.9-20.1h73.6l8.9 20.1c4.5 10.1 16.3 14.6 26.4 10.2s14.6-16.3 10.2-26.4l-64-144zM160 233.2L179 276H141l19-42.8zM448 164c11 0 20 9 20 20v4h44 16c11 0 20 9 20 20s-9 20-20 20h-2l-1.6 4.5c-8.9 24.4-22.4 46.6-39.6 65.4c.9 .6 1.8 1.1 2.7 1.6l18.9 11.3c9.5 5.7 12.5 18 6.9 27.4s-18 12.5-27.4 6.9l-18.9-11.3c-4.5-2.7-8.8-5.5-13.1-8.5c-10.6 7.5-21.9 14-34 19.4l-3.6 1.6c-10.1 4.5-21.9-.1-26.4-10.2s.1-21.9 10.2-26.4l3.6-1.6c6.4-2.9 12.6-6.1 18.5-9.8l-12.2-12.2c-7.8-7.8-7.8-20.5 0-28.3s20.5-7.8 28.3 0l14.6 14.6 .5 .5c12.4-13.1 22.5-28.3 29.8-45H448 376c-11 0-20-9-20-20s9-20 20-20h52v-4c0-11 9-20 20-20z"/></svg>
  </span>


    </span>
    <div class="text-sm font-medium text-gray-500 hover:text-primary-600 dark:hover:text-primary-400" title="H.264帧编码原理简述 - 帧内编码和帧间编码">简体中文</div>
  </div>
  <div class="absolute menuhide">
    <div class="pt-2 p-5 mt-2 rounded-xl backdrop-blur shadow-2xl">
      <div class="flex flex-col space-y-3">
        
        <a href="/en/posts/intra-prediction-and-inter-prediction/" class="flex items-center">
          <p class="text-sm font-sm text-gray-500 hover:text-primary-600 dark:hover:text-primary-400" title="A Brief Overview of H.264 Frame Encoding Principles - Intra Prediction and Inter Prediction">
            EN
          </p>
        </a>
        
        <a href="/posts/intra-prediction-and-inter-prediction/" class="flex items-center">
          <p class="text-sm font-sm text-gray-500 hover:text-primary-600 dark:hover:text-primary-400" title="H.264帧编码原理简述 - 帧内编码和帧间编码">
            中文
          </p>
        </a>
        
      </div>
    </div>
  </div>
</div>



            
            <button id="search-button" aria-label="Search" class="text-base hover:text-primary-600 dark:hover:text-primary-400"
                title="">
                

  <span class="relative block icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>

  </span>


            </button>
            


            
            
            <div
                class=" flex items-center">
                <button id="appearance-switcher" aria-label="Dark mode switcher" type="button" class="text-base hover:text-primary-600 dark:hover:text-primary-400">
                    <div class="flex items-center justify-center dark:hidden">
                        

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M32 256c0-123.8 100.3-224 223.8-224c11.36 0 29.7 1.668 40.9 3.746c9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3c9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480C132.1 480 32 379.6 32 256z"/></svg>

  </span>


                    </div>
                    <div class="items-center justify-center hidden dark:flex">
                        

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02 0-95.1 42.98-95.1 95.1S202.1 351.1 256 351.1s95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347L446.1 255.1l63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7l-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89L164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6L12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256l-63.15 91.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7l19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109l109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69 0-127.1-57.31-127.1-127.1c0-70.69 57.31-127.1 127.1-127.1s127.1 57.3 127.1 127.1C383.1 326.7 326.7 383.1 256 383.1z"/></svg>

  </span>


                    </div>
                </button>
            </div>
            

        </nav>
        <div class="flex md:hidden items-center gap-x-5 md:ml-12 h-12">

            <span></span>

            
<div>
  <div class="cursor-pointer flex items-center nested-menu">
    <span class="ltr:mr-1 rtl:ml-1">
      

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512">
    <path fill="currentColor" d="M0 128C0 92.7 28.7 64 64 64H256h48 16H576c35.3 0 64 28.7 64 64V384c0 35.3-28.7 64-64 64H320 304 256 64c-35.3 0-64-28.7-64-64V128zm320 0V384H576V128H320zM178.3 175.9c-3.2-7.2-10.4-11.9-18.3-11.9s-15.1 4.7-18.3 11.9l-64 144c-4.5 10.1 .1 21.9 10.2 26.4s21.9-.1 26.4-10.2l8.9-20.1h73.6l8.9 20.1c4.5 10.1 16.3 14.6 26.4 10.2s14.6-16.3 10.2-26.4l-64-144zM160 233.2L179 276H141l19-42.8zM448 164c11 0 20 9 20 20v4h44 16c11 0 20 9 20 20s-9 20-20 20h-2l-1.6 4.5c-8.9 24.4-22.4 46.6-39.6 65.4c.9 .6 1.8 1.1 2.7 1.6l18.9 11.3c9.5 5.7 12.5 18 6.9 27.4s-18 12.5-27.4 6.9l-18.9-11.3c-4.5-2.7-8.8-5.5-13.1-8.5c-10.6 7.5-21.9 14-34 19.4l-3.6 1.6c-10.1 4.5-21.9-.1-26.4-10.2s.1-21.9 10.2-26.4l3.6-1.6c6.4-2.9 12.6-6.1 18.5-9.8l-12.2-12.2c-7.8-7.8-7.8-20.5 0-28.3s20.5-7.8 28.3 0l14.6 14.6 .5 .5c12.4-13.1 22.5-28.3 29.8-45H448 376c-11 0-20-9-20-20s9-20 20-20h52v-4c0-11 9-20 20-20z"/></svg>
  </span>


    </span>
    <div class="text-sm font-medium text-gray-500 hover:text-primary-600 dark:hover:text-primary-400" title="H.264帧编码原理简述 - 帧内编码和帧间编码">简体中文</div>
  </div>
  <div class="absolute menuhide">
    <div class="pt-2 p-5 mt-2 rounded-xl backdrop-blur shadow-2xl">
      <div class="flex flex-col space-y-3">
        
        <a href="/en/posts/intra-prediction-and-inter-prediction/" class="flex items-center">
          <p class="text-sm font-sm text-gray-500 hover:text-primary-600 dark:hover:text-primary-400" title="A Brief Overview of H.264 Frame Encoding Principles - Intra Prediction and Inter Prediction">
            EN
          </p>
        </a>
        
        <a href="/posts/intra-prediction-and-inter-prediction/" class="flex items-center">
          <p class="text-sm font-sm text-gray-500 hover:text-primary-600 dark:hover:text-primary-400" title="H.264帧编码原理简述 - 帧内编码和帧间编码">
            中文
          </p>
        </a>
        
      </div>
    </div>
  </div>
</div>



            
            <button id="search-button-mobile" aria-label="Search" class="text-base hover:text-primary-600 dark:hover:text-primary-400"
                title="">
                

  <span class="relative block icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>

  </span>


            </button>
            

            
            
            <button id="appearance-switcher-mobile" aria-label="Dark mode switcher" type="button" class="text-base hover:text-primary-600 dark:hover:text-primary-400 ltr:mr-1 rtl:ml-1">
                <div class="flex items-center justify-center dark:hidden">
                    

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M32 256c0-123.8 100.3-224 223.8-224c11.36 0 29.7 1.668 40.9 3.746c9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3c9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480C132.1 480 32 379.6 32 256z"/></svg>

  </span>


                </div>
                <div class="items-center justify-center hidden dark:flex">
                    

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02 0-95.1 42.98-95.1 95.1S202.1 351.1 256 351.1s95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347L446.1 255.1l63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7l-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89L164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6L12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256l-63.15 91.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7l19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109l109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69 0-127.1-57.31-127.1-127.1c0-70.69 57.31-127.1 127.1-127.1s127.1 57.3 127.1 127.1C383.1 326.7 326.7 383.1 256 383.1z"/></svg>

  </span>


                </div>
            </button>
            

        </div>
    </div>
    <div class="-my-2 md:hidden">

        <label id="menu-button" class="block">
            
            <div class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400">
                

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M0 96C0 78.33 14.33 64 32 64H416C433.7 64 448 78.33 448 96C448 113.7 433.7 128 416 128H32C14.33 128 0 113.7 0 96zM0 256C0 238.3 14.33 224 32 224H416C433.7 224 448 238.3 448 256C448 273.7 433.7 288 416 288H32C14.33 288 0 273.7 0 256zM416 448H32C14.33 448 0 433.7 0 416C0 398.3 14.33 384 32 384H416C433.7 384 448 398.3 448 416C448 433.7 433.7 448 416 448z"/></svg>

  </span>


            </div>
            <div id="menu-wrapper" style="padding-top:5px;"
                class="fixed inset-0 z-30 invisible w-screen h-screen m-0 overflow-auto transition-opacity opacity-0 cursor-default bg-neutral-100/50 backdrop-blur-sm dark:bg-neutral-900/50">
                <ul
                    class="flex space-y-2 mt-3 flex-col items-end w-full px-6 py-6 mx-auto overflow-visible list-none ltr:text-right rtl:text-left max-w-7xl">

                    <li id="menu-close-button">
                        <span
                            class="cursor-pointer inline-block align-text-bottom hover:text-primary-600 dark:hover:text-primary-400">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>

  </span>

</span>
                    </li>

                    

                    
  <li class="mt-1">
    <a href="/posts/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-bg font-bg" title="">
            文章
        </p>
    </a>
</li>




                    

                    
  <li class="mt-1">
    <a href="/tags/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-bg font-bg" title="Tags">
            标签
        </p>
    </a>
</li>




                    

                    
  <li class="mt-1">
    <a href="https://gwliang.com"  target="_blank"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <div >
            

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentColor" d="M172.5 131.1C228.1 75.51 320.5 75.51 376.1 131.1C426.1 181.1 433.5 260.8 392.4 318.3L391.3 319.9C381 334.2 361 337.6 346.7 327.3C332.3 317 328.9 297 339.2 282.7L340.3 281.1C363.2 249 359.6 205.1 331.7 177.2C300.3 145.8 249.2 145.8 217.7 177.2L105.5 289.5C73.99 320.1 73.99 372 105.5 403.5C133.3 431.4 177.3 435 209.3 412.1L210.9 410.1C225.3 400.7 245.3 404 255.5 418.4C265.8 432.8 262.5 452.8 248.1 463.1L246.5 464.2C188.1 505.3 110.2 498.7 60.21 448.8C3.741 392.3 3.741 300.7 60.21 244.3L172.5 131.1zM467.5 380C411 436.5 319.5 436.5 263 380C213 330 206.5 251.2 247.6 193.7L248.7 192.1C258.1 177.8 278.1 174.4 293.3 184.7C307.7 194.1 311.1 214.1 300.8 229.3L299.7 230.9C276.8 262.1 280.4 306.9 308.3 334.8C339.7 366.2 390.8 366.2 422.3 334.8L534.5 222.5C566 191 566 139.1 534.5 108.5C506.7 80.63 462.7 76.99 430.7 99.9L429.1 101C414.7 111.3 394.7 107.1 384.5 93.58C374.2 79.2 377.5 59.21 391.9 48.94L393.5 47.82C451 6.731 529.8 13.25 579.8 63.24C636.3 119.7 636.3 211.3 579.8 267.7L467.5 380z"/></svg>

  </span>


        </div>
        
        <p class="text-bg font-bg" title="">
            
        </p>
    </a>
</li>




                    

                    
  <li class="mt-1">
    <a href="https://github.com/gaowanliang"  target="_blank"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <div >
            

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>

  </span>


        </div>
        
        <p class="text-bg font-bg" title="">
            
        </p>
    </a>
</li>




                    

                    
  <li class="mt-1">
    <a href="https://twitter.com/gaowanliang"  target="_blank"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <div >
            

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>

  </span>


        </div>
        
        <p class="text-bg font-bg" title="">
            
        </p>
    </a>
</li>




                    

                </ul>
                
                

            </div>
        </label>
    </div>
</div>





  </div>
</div>
<script>
  window.addEventListener('scroll', function (e) {
    var scroll = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;
    var background_blur = document.getElementById('menu-blur');
    background_blur.style.opacity = (scroll / 300);
  });
</script>

  
  <div class="relative flex flex-col grow">
    <main id="main-content" class="grow">
      


<article>
  
  
  
  
  
  


<div class="w-full rounded-md h-36 md:h-56 lg:h-72 single_hero_basic nozoom" style="background-image:url(/posts/intra-prediction-and-inter-prediction/cover_hu2935013942573574231.webp);"></div>



<div class="fixed inset-x-0 top-0 h-[800px] single_hero_background nozoom"
    style="background-image:url(/img/background.svg);">
    <div class="absolute inset-0 bg-gradient-to-t from-neutral dark:from-neutral-800 to-transparent mix-blend-normal">
    </div>
    <div
        class="absolute inset-0 opacity-30 dark:opacity-60 bg-gradient-to-t from-neutral dark:from-neutral-800 to-neutral dark:to-neutral-800 mix-blend-normal">
    </div>
</div>

<div id="background-blur" class="fixed opacity-0 inset-x-0 top-0 h-full single_hero_background nozoom backdrop-blur-2xl"></div>
<script>
    window.addEventListener('scroll', function (e) {
        var scroll = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;
        var background_blur = document.getElementById('background-blur');
        background_blur.style.opacity = (scroll / 300)
    });
</script>



  
  

  <header id="single_header" class="mt-5 max-w-prose">
    
    <ol class="text-sm text-neutral-500 dark:text-neutral-400 print:hidden">
  
  
    
  
    
  
  <li class="inline hidden">
    <a
      class="hover:underline decoration-neutral-300 dark:underline-neutral-600"
      href="/"
      >高玩梁的博客</a
    ><span class="px-1 text-primary-500">/</span>
  </li>

  
  <li class="inline ">
    <a
      class="hover:underline decoration-neutral-300 dark:underline-neutral-600"
      href="/posts/"
      >posts</a
    ><span class="px-1 text-primary-500">/</span>
  </li>

  
  <li class="inline hidden">
    <a
      class="hover:underline decoration-neutral-300 dark:underline-neutral-600"
      href="/posts/intra-prediction-and-inter-prediction/"
      >H.264帧编码原理简述 - 帧内编码和帧间编码</a
    ><span class="px-1 text-primary-500">/</span>
  </li>

</ol>


    
    <h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">
      H.264帧编码原理简述 - 帧内编码和帧间编码
    </h1>
    <div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden">
      





  
  







  





  



  













<div class="flex flex-row flex-wrap items-center">
  
  
  <time datetime="2024-03-29T00:00:00&#43;00:00">2024年3月29日</time><span class="px-2 text-primary-500">&middot;</span><span>5434 字</span><span class="px-2 text-primary-500">&middot;</span><span title="预计阅读">11 分钟</span>
  

  
  
</div>





<div class="flex flex-row flex-wrap items-center">
  
  
  
  
  
  
  <span style="margin-top:0.5rem" class="mr-2" onclick="window.open(&#34;/categories/%E6%8A%80%E6%9C%AF/&#34;,'_self');return false;">
    <span class="flex" style="cursor: pointer;">
  <span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
    技术
  </span>
</span>
  </span>
  
  
  
  
  
  
  
  
  
  <span style="margin-top:0.5rem" class="mr-2" onclick="window.open(&#34;/tags/h264/&#34;,'_self');return false;">
    <span class="flex" style="cursor: pointer;">
  <span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
    H264
  </span>
</span>
  </span>
  
  <span style="margin-top:0.5rem" class="mr-2" onclick="window.open(&#34;/tags/%E8%A7%86%E9%A2%91%E7%BC%96%E7%A0%81/&#34;,'_self');return false;">
    <span class="flex" style="cursor: pointer;">
  <span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
    视频编码
  </span>
</span>
  </span>
  
  <span style="margin-top:0.5rem" class="mr-2" onclick="window.open(&#34;/tags/%E5%B8%A7%E5%86%85%E7%BC%96%E7%A0%81/&#34;,'_self');return false;">
    <span class="flex" style="cursor: pointer;">
  <span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
    帧内编码
  </span>
</span>
  </span>
  
  <span style="margin-top:0.5rem" class="mr-2" onclick="window.open(&#34;/tags/%E5%B8%A7%E9%97%B4%E7%BC%96%E7%A0%81/&#34;,'_self');return false;">
    <span class="flex" style="cursor: pointer;">
  <span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
    帧间编码
  </span>
</span>
  </span>
  
  
  
  
</div>




    </div>

    
    
    
    
    

    

    
      
      
        
        
<div class="flex author">
  
    
    
      
    
    
      
        
      
      <img class="!mt-0 !mb-0 h-24 w-24 rounded-full ltr:mr-4 rtl:ml-4" width="96" height="96"
      alt="高玩梁" src="/img/avatar_hu6864959369967912551.webp" />
    
  
  <div class="place-self-center">
    
    <div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">
      作者
    </div>
    <div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">
      高玩梁
    </div>
    
    
    <div class="text-sm text-neutral-700 dark:text-neutral-400">一个对所有事物保持好奇心的人</div>
    
    <div class="text-2xl sm:text-lg">
  <div class="flex flex-wrap text-neutral-400 dark:text-neutral-500">
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://gwliang.com"
          target="_blank"
          aria-label="Link"
          rel="me noopener noreferrer"
          ><span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentColor" d="M172.5 131.1C228.1 75.51 320.5 75.51 376.1 131.1C426.1 181.1 433.5 260.8 392.4 318.3L391.3 319.9C381 334.2 361 337.6 346.7 327.3C332.3 317 328.9 297 339.2 282.7L340.3 281.1C363.2 249 359.6 205.1 331.7 177.2C300.3 145.8 249.2 145.8 217.7 177.2L105.5 289.5C73.99 320.1 73.99 372 105.5 403.5C133.3 431.4 177.3 435 209.3 412.1L210.9 410.1C225.3 400.7 245.3 404 255.5 418.4C265.8 432.8 262.5 452.8 248.1 463.1L246.5 464.2C188.1 505.3 110.2 498.7 60.21 448.8C3.741 392.3 3.741 300.7 60.21 244.3L172.5 131.1zM467.5 380C411 436.5 319.5 436.5 263 380C213 330 206.5 251.2 247.6 193.7L248.7 192.1C258.1 177.8 278.1 174.4 293.3 184.7C307.7 194.1 311.1 214.1 300.8 229.3L299.7 230.9C276.8 262.1 280.4 306.9 308.3 334.8C339.7 366.2 390.8 366.2 422.3 334.8L534.5 222.5C566 191 566 139.1 534.5 108.5C506.7 80.63 462.7 76.99 430.7 99.9L429.1 101C414.7 111.3 394.7 107.1 384.5 93.58C374.2 79.2 377.5 59.21 391.9 48.94L393.5 47.82C451 6.731 529.8 13.25 579.8 63.24C636.3 119.7 636.3 211.3 579.8 267.7L467.5 380z"/></svg>

  </span>

</span></a
        >
      
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://github.com/gaowanliang"
          target="_blank"
          aria-label="Github"
          rel="me noopener noreferrer"
          ><span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>

  </span>

</span></a
        >
      
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://twitter.com/gaowanliang"
          target="_blank"
          aria-label="X-Twitter"
          rel="me noopener noreferrer"
          ><span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"/></svg>
  </span>

</span></a
        >
      
    
  </div>

</div>
  </div>
</div>

      

      

      
      <div class="mb-5"></div>
      

    

  </header>
  
  <section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row">
    
     <div
      class="order-first lg:ml-auto px-0 lg:order-last ltr:lg:pl-8 rtl:lg:pr-8">
      <div class="toc ltr:pl-5 rtl:pr-5 print:hidden lg:sticky lg:top-[140px]">

         <details open id="TOCView"
  class="toc-right mt-0 overflow-y-scroll overscroll-contain scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-400 dark:scrollbar-track-neutral-800 dark:scrollbar-thumb-neutral-600 rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 hidden lg:block">
  <summary
    class="block py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">
    目录
  </summary>
  <div
    class="min-w-[220px] py-2 border-dotted ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#帧内预测intra-prediction">帧内预测（intra-prediction）</a>
      <ul>
        <li><a href="#残差的意义">残差的意义</a></li>
        <li><a href="#预测模式">预测模式</a></li>
        <li><a href="#亮度">亮度</a></li>
        <li><a href="#色度">色度</a></li>
        <li><a href="#sae">SAE</a></li>
      </ul>
    </li>
    <li><a href="#帧间预测inter-prediction">帧间预测（inter-prediction）</a>
      <ul>
        <li><a href="#树形结构的运动补偿">树形结构的运动补偿</a></li>
        <li><a href="#运动向量计算">运动向量计算</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</details>
<details class="toc-inside mt-0 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 lg:hidden">
  <summary
    class="py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">
    目录
  </summary>
  <div
    class="py-2 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#帧内预测intra-prediction">帧内预测（intra-prediction）</a>
      <ul>
        <li><a href="#残差的意义">残差的意义</a></li>
        <li><a href="#预测模式">预测模式</a></li>
        <li><a href="#亮度">亮度</a></li>
        <li><a href="#色度">色度</a></li>
        <li><a href="#sae">SAE</a></li>
      </ul>
    </li>
    <li><a href="#帧间预测inter-prediction">帧间预测（inter-prediction）</a>
      <ul>
        <li><a href="#树形结构的运动补偿">树形结构的运动补偿</a></li>
        <li><a href="#运动向量计算">运动向量计算</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</details>

<script>

  var margin = 200;
  var marginError = 50;

  (function () {
    var $window = $(window);
    var $toc = $('#TOCView');
    var tocHeight = $toc.height();

    function onResize() {
      var windowAndMarginHeight = $window.height() - margin;
      if(tocHeight >= windowAndMarginHeight) {
        $toc.css("overflow-y", "scroll")
        $toc.css("max-height", (windowAndMarginHeight + marginError) + "px")
      } else {
        $toc.css("overflow-y", "hidden")
        $toc.css("max-height", "9999999px")
      }
    }

    $window.on('resize', onResize);
    $(document).ready(onResize);
  })();



</script>
   </div>
      </div>
      

      <div class="min-w-0 min-h-0 max-w-fit">
        
        


        <div class="article-content max-w-prose mb-20">
          <p>上回说了一些关于 MP4 的 H264 编码的内容，这次再来说说 H264 是如何实现这么高的压缩率的，这就不得不提到帧内编码和帧间编码，查了一下，全网可能没有我讲的这么详细的的了，而且几乎不包含任何复杂难懂的信息，读到就是赚到(*/ω＼*)</p>


<h2 class="relative group">帧内预测（intra-prediction） 
    <div id="%E5%B8%A7%E5%86%85%E9%A2%84%E6%B5%8Bintra-prediction" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E5%B8%A7%E5%86%85%E9%A2%84%E6%B5%8Bintra-prediction" aria-label="锚点">#</a>
    </span>        
    
</h2>
<p>帧内预测（Intra-prediction）是视频编码中的一个重要概念，它是从已编码的帧中形成预测的。在视频压缩编码中，通常使用三种类型的帧：I 帧、P 帧和 B 帧。I 帧是关键帧，它只使用帧内预测。P 帧和 B 帧则会根据情况使用帧内预测或帧间预测。</p>
<p>帧内预测是从当前帧的已编码部分形成预测的。这个过程可以被视为一种精确的自我编码。首先，需要决定帧的类型。如果是 I 帧，它只使用帧内预测。如果是 P 帧或 B 帧，它会根据帧内预测和帧间预测的成本为每个宏块选择一种预测方式。其针对一帧（或者不满一帧）的数据，进行编码。编码时所参考的数据就是这一帧，换言之，解码也就只需要这一帧数据。这种编码方式也被用于图片的编码中，例如，webp 图片的编码方式就和 H.264 的帧内编码方式极度相似。</p>
<p>预测的过程是这样的：首先，将原始数据减去预测值，得到的就是残差数据。然后，对残差数据进行离散余弦变换（DCT）和量化。在编码部分，会进行 zigzag 扫描，并使用预测来减小一些头信息的大小。对于 DCT 和量化的结果，还会进行反向计算。然后，将预测值和反向计算的结果加在一起，这就完成了精确的自我编码。</p>
<p>帧内预测使用受限的数据进行下一次的帧内预测。在添加到参考列表并被帧间预测使用之前，会使用环路滤波器来减少块效应失真。这就是帧内预测的基本概念和过程。</p>


<h3 class="relative group">残差的意义 
    <div id="%E6%AE%8B%E5%B7%AE%E7%9A%84%E6%84%8F%E4%B9%89" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E6%AE%8B%E5%B7%AE%E7%9A%84%E6%84%8F%E4%B9%89" aria-label="锚点">#</a>
    </span>        
    
</h3>
<p>在视频编码中，残差数据是原始数据和预测数据之间的差异。这个概念来自于预测模型，其中预测值通常不会完全准确，因此会有一些“残差”或者说是误差。</p>
<p>在我们对视频帧进行编码时，我们通常会尝试预测每个像素的值，然后计算出预测值和实际值之间的差异，这就是残差。这样做的好处是，残差数据通常会比原始像素数据有更多的零值，这使得它们更容易被压缩和编码。</p>
<p>例如，如果我们预测一个像素的值为 200，而实际值为 205，那么残差就是 5。在编码这个残差值时，我们只需要存储这个小的差异，而不是完整的像素值。这大大减少了需要存储的信息量，从而实现了数据的压缩。</p>
<p>在视频编码中，我们通常会对残差数据进行进一步的处理，比如离散余弦变换（DCT）和量化，然后再进行编码。这些步骤都是为了进一步压缩数据，减少所需的存储空间和带宽。下面是原始的图像和计算残差后可视化的图像。</p>
<p>
    <figure>
      <img
        class="my-0 rounded-md"
        loading="lazy"
        srcset="
        /posts/intra-prediction-and-inter-prediction/image1_hu9923456802331334059.webp 330w,
        /posts/intra-prediction-and-inter-prediction/image1_hu1875778941626034034.webp 660w,
        /posts/intra-prediction-and-inter-prediction/image1_hu13028200743002353472.webp 1024w,
        /posts/intra-prediction-and-inter-prediction/image1_hu17688586320209461959.webp 2x"
        src="/posts/intra-prediction-and-inter-prediction/image1_hu1875778941626034034.webp"
        alt=""
      />
      
    </figure>
</p>
<p>
    <figure>
      <img
        class="my-0 rounded-md"
        loading="lazy"
        srcset="
        /posts/intra-prediction-and-inter-prediction/image2_hu17142589521780612399.webp 330w,
        /posts/intra-prediction-and-inter-prediction/image2_hu12492211601324744653.webp 660w,
        /posts/intra-prediction-and-inter-prediction/image2_hu14276576302883094611.webp 1024w,
        /posts/intra-prediction-and-inter-prediction/image2_hu9961756008525875970.webp 2x"
        src="/posts/intra-prediction-and-inter-prediction/image2_hu12492211601324744653.webp"
        alt=""
      />
      
    </figure>
</p>
<p>那为什么会出现残差呢，是因为预测的不准，我们来看下实际是如何预测的。</p>


<h3 class="relative group">预测模式 
    <div id="%E9%A2%84%E6%B5%8B%E6%A8%A1%E5%BC%8F" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E9%A2%84%E6%B5%8B%E6%A8%A1%E5%BC%8F" aria-label="锚点">#</a>
    </span>        
    
</h3>
<p>在 H264 中，图像通过 YUV 表示，“Y”表示明亮度（Luminance、Luma），“U”和“V”则是色度、浓度（Chrominance、Chroma），和一般的 RGB 和 HSV 不太一样。</p>
<p>在帧内预测模式下，预测块 P 是基于先前编码和重构的块生成的，并在编码当前块之前从当前块中减去。对于亮度（luma）样本，每个 4×4 块或 16×16 宏块都会形成一个预测块 P。每个 4×4 亮度块有九种可选的预测模式，每个 16×16 亮度块有四种模式，色度（chroma）组件也有四种模式。编码器通常会选择使预测块 P 和待编码块之间的差异最小的预测模式。</p>
<p>还有一种特殊的编码方式 I PCM，I PCM 是一种特殊的帧内编码模式，它允许编码器直接传输图像样本的值（无需预测或转换）。在一些特殊情况下（例如，异常的图像内容和/或非常低的量化参数），这种模式可能比通常的帧内预测、变换、量化和熵编码过程更有效率。包括 I PCM 选项可以在不限制解码图像质量的情况下，对编码宏块中可能包含的位数设置绝对限制。</p>


<h3 class="relative group">亮度 
    <div id="%E4%BA%AE%E5%BA%A6" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E4%BA%AE%E5%BA%A6" aria-label="锚点">#</a>
    </span>        
    
</h3>
<p>对于亮度，有以下 9 种预测模式</p>
<p>
    <figure>
      <img
        class="my-0 rounded-md"
        loading="lazy"
        srcset="
        /posts/intra-prediction-and-inter-prediction/image3_hu4582552829491010336.webp 330w,
        /posts/intra-prediction-and-inter-prediction/image3_hu12288675844958816883.webp 660w,
        /posts/intra-prediction-and-inter-prediction/image3_hu14706211413539195703.webp 1024w,
        /posts/intra-prediction-and-inter-prediction/image3_hu14215874977939023844.webp 2x"
        src="/posts/intra-prediction-and-inter-prediction/image3_hu12288675844958816883.webp"
        alt=""
      />
      
    </figure>
</p>
<p>
    <figure>
      <img
        class="my-0 rounded-md"
        loading="lazy"
        srcset="
        /posts/intra-prediction-and-inter-prediction/image4_hu17349938254115845194.webp 330w,
        /posts/intra-prediction-and-inter-prediction/image4_hu17473215042178183256.webp 660w,
        /posts/intra-prediction-and-inter-prediction/image4_hu4630368499266675374.webp 1024w,
        /posts/intra-prediction-and-inter-prediction/image4_hu17690085882773077110.webp 2x"
        src="/posts/intra-prediction-and-inter-prediction/image4_hu17473215042178183256.webp"
        alt=""
      />
      
    </figure>
</p>
<p>我们可以认为，对于一个宏块，其中的亮度通过左和上的像素是可以拟合 成以上 9 种模式中的一种，图片中可以很清晰的看到基本上每一个块都拟合了上面 9 种模式中的一种。但是缺陷是什么呢，就是这种预测之后会失真。可以看实际图和预测图中的区别：</p>
<p>
    <figure>
      <img
        class="my-0 rounded-md"
        loading="lazy"
        srcset="
        /posts/intra-prediction-and-inter-prediction/image5_hu11957421316204267296.webp 330w,
        /posts/intra-prediction-and-inter-prediction/image5_hu4100198558729583568.webp 660w,
        /posts/intra-prediction-and-inter-prediction/image5_hu13091627375306708358.webp 1024w,
        /posts/intra-prediction-and-inter-prediction/image5_hu8792034448147892218.webp 2x"
        src="/posts/intra-prediction-and-inter-prediction/image5_hu4100198558729583568.webp"
        alt=""
      />
      
    </figure>
原始图</p>
<p>
    <figure>
      <img
        class="my-0 rounded-md"
        loading="lazy"
        srcset="
        /posts/intra-prediction-and-inter-prediction/image6_hu17180588214988184881.webp 330w,
        /posts/intra-prediction-and-inter-prediction/image6_hu10822189959058448703.webp 660w,
        /posts/intra-prediction-and-inter-prediction/image6_hu17877935925183440482.webp 1024w,
        /posts/intra-prediction-and-inter-prediction/image6_hu13204947125677536877.webp 2x"
        src="/posts/intra-prediction-and-inter-prediction/image6_hu10822189959058448703.webp"
        alt=""
      />
      
    </figure>
预测后的图</p>
<p>可以很清晰的看出两者的区别，这样就需要通过存储残差信息来弥补和实际图中的差别</p>
<p>对于更大的块，可以用更大的 8x8 或者 16x16 的预测方法，实际上差不太多。一般来说，H.264/AVC 支持在 16x16 和 4x4 的块上进行预测。这两种预测模式被称为宏块预测（16x16）和子块预测（4x4）。</p>
<p>然而，H.264/AVC 还支持 8x8 变换。这是一种可选的特性，可用于替代默认的 4x4 变换。在某些情况下，使用 8x8 变换可以提供更好的编码效率。对于宏块预测，只有 4 种方式，而由于 8x8 变换是子块预测的替代，所以 8x8 变换也有 9 种。</p>
<p>
    <figure>
      <img
        class="my-0 rounded-md"
        loading="lazy"
        srcset="
        /posts/intra-prediction-and-inter-prediction/image7_hu6745165869913645734.webp 330w,
        /posts/intra-prediction-and-inter-prediction/image7_hu18301048905127705275.webp 660w,
        /posts/intra-prediction-and-inter-prediction/image7_hu6059058799629739820.webp 1024w,
        /posts/intra-prediction-and-inter-prediction/image7_hu11861312199224051097.webp 2x"
        src="/posts/intra-prediction-and-inter-prediction/image7_hu18301048905127705275.webp"
        alt=""
      />
      
    </figure>

红色是 16x16，紫色是 8x8，蓝色是 4x4</p>
<p>
    <figure>
      <img
        class="my-0 rounded-md"
        loading="lazy"
        srcset="
        /posts/intra-prediction-and-inter-prediction/image8_hu5727883261562239765.webp 330w,
        /posts/intra-prediction-and-inter-prediction/image8_hu6803120680788948683.webp 660w,
        /posts/intra-prediction-and-inter-prediction/image8_hu7321396761757807858.webp 1024w,
        /posts/intra-prediction-and-inter-prediction/image8_hu920958884836665682.webp 2x"
        src="/posts/intra-prediction-and-inter-prediction/image8_hu6803120680788948683.webp"
        alt=""
      />
      
    </figure>

16x16 的 4 种模式</p>


<h3 class="relative group">色度 
    <div id="%E8%89%B2%E5%BA%A6" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E8%89%B2%E5%BA%A6" aria-label="锚点">#</a>
    </span>        
    
</h3>
<p>对于色度，有 4 种模式，实际的情况和亮度的 16x16 的 4 种模式是一样的，所以图也是一样的</p>
<p>在 H.264/AVC 编码中，色度(chroma)的预测通常在 8x8 的块上进行。这是因为在许多情况下，色度信号的采样率比亮度信号的采样率低，这被称为色度子采样(chroma subsampling)。例如，在常见的 4:2:0 子采样模式中，每四个亮度样本对应一个色度样本。因此，一个 16x16 的亮度块对应一个 8x8 的色度块。</p>
<p>
    <figure>
      <img
        class="my-0 rounded-md"
        loading="lazy"
        srcset="
        /posts/intra-prediction-and-inter-prediction/image9_hu4819397643122184321.webp 330w,
        /posts/intra-prediction-and-inter-prediction/image9_hu3792581561867685724.webp 660w,
        /posts/intra-prediction-and-inter-prediction/image9_hu12870724939373450200.webp 1024w,
        /posts/intra-prediction-and-inter-prediction/image9_hu14209981564783592304.webp 2x"
        src="/posts/intra-prediction-and-inter-prediction/image9_hu3792581561867685724.webp"
        alt=""
      />
      
    </figure>
</p>
<p>在流分析软件中，16x16 的色度块实际上是对原始视频的一个视觉化表示。在 4:2:0 色度子采样模式中，一个 16x16 的亮度宏块对应一个 8x8 的色度块。然而，为了在流分析软件中对视频进行可视化，这些 8x8 的色度块可能会被扩大到 16x16 的大小以匹配亮度宏块的大小。这样做是为了更方便地展示和比较亮度和色度的数据。这只是一种可视化的方式，实际的色度数据仍然是在 8x8 的块上进行预测和编码的。这是因为在 4:2:0 色度子采样模式中，色度信号的分辨率是亮度信号的一半。</p>
<p>
    <figure>
      <img
        class="my-0 rounded-md"
        loading="lazy"
        srcset="
        /posts/intra-prediction-and-inter-prediction/image10_hu1657539807725956909.webp 330w,
        /posts/intra-prediction-and-inter-prediction/image10_hu12810987719865974288.webp 660w,
        /posts/intra-prediction-and-inter-prediction/image10_hu6136582531253497360.webp 1024w,
        /posts/intra-prediction-and-inter-prediction/image10_hu2336077794475341108.webp 2x"
        src="/posts/intra-prediction-and-inter-prediction/image10_hu12810987719865974288.webp"
        alt=""
      />
      
    </figure>
</p>
<p>切换到色度模式，可以很清楚的看到是 8x8 的模式</p>
<p>至于编码器要挑选哪种模式，这个要根据 SAE 来判断</p>


<h3 class="relative group">SAE 
    <div id="sae" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#sae" aria-label="锚点">#</a>
    </span>        
    
</h3>
<p>SAE 指的是&quot;Sum of Absolute Errors&quot;，即绝对误差之和。这是一种常见的误差度量方式，用于评估预测或编码操作的效果。</p>
<p>在视频编码中，我们通常需要对原始视频数据进行预测，以减少需要编码和传输的数据量。例如，我们可能会预测一个块的像素值，然后只编码预测值和实际值之间的差异（称为预测误差或<strong>残差</strong>）。这样可以大大减少需要编码的数据量，从而提高编码效率。</p>
<p>SAE 就是用于评估这种预测效果的一种度量。它是预测误差的绝对值之和。如果 SAE 值较小，那么说明预测效果较好，因为预测误差较小。反之，如果 SAE 值较大，那么说明预测效果较差。</p>
<p>
    <figure>
      <img
        class="my-0 rounded-md"
        loading="lazy"
        srcset="
        /posts/intra-prediction-and-inter-prediction/image11_hu15796225702450740822.webp 330w,
        /posts/intra-prediction-and-inter-prediction/image11_hu5024269027286106381.webp 660w,
        /posts/intra-prediction-and-inter-prediction/image11_hu4163453398866790047.webp 1024w,
        /posts/intra-prediction-and-inter-prediction/image11_hu7797146318371331038.webp 2x"
        src="/posts/intra-prediction-and-inter-prediction/image11_hu5024269027286106381.webp"
        alt=""
      />
      
    </figure>
</p>
<p>8 的 SAE 最低，所以编码器会选择 8</p>
<p>具体怎么算出来的，就无所谓了，太复杂了，不是做编码器没必要了解</p>


<h2 class="relative group">帧间预测（inter-prediction） 
    <div id="%E5%B8%A7%E9%97%B4%E9%A2%84%E6%B5%8Binter-prediction" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E5%B8%A7%E9%97%B4%E9%A2%84%E6%B5%8Binter-prediction" aria-label="锚点">#</a>
    </span>        
    
</h2>
<p>帧间预测是一种利用视频帧之间的时间相关性来减少冗余的方法。在这种方法中，编码器会从一个或多个先前编码的帧（或场）中创建预测模型，然后用这个模型来预测当前帧的内容。预测的结果和实际的内容之间的差异（称为预测误差或残差）将被编码和传输。</p>
<p>帧间预测主要依赖于运动补偿。运动补偿是一种估计和补偿视频帧之间运动的方法。在这种方法中，编码器会为每个块或子块找到一个运动向量，这个向量表示了这个块在先前帧中的对应位置。然后，编码器会用这个位置的内容来预测当前块的内容。</p>


<h3 class="relative group">树形结构的运动补偿 
    <div id="%E6%A0%91%E5%BD%A2%E7%BB%93%E6%9E%84%E7%9A%84%E8%BF%90%E5%8A%A8%E8%A1%A5%E5%81%BF" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E6%A0%91%E5%BD%A2%E7%BB%93%E6%9E%84%E7%9A%84%E8%BF%90%E5%8A%A8%E8%A1%A5%E5%81%BF" aria-label="锚点">#</a>
    </span>        
    
</h3>
<p>树形结构的运动补偿是一种灵活的运动补偿方法。在这种方法中，每个宏块（16x16 的亮度样本）可以被分割成多种方式，如一块 16x16 的宏块，两块 16x8 的块，两块 8x16 的块，或者四块 8x8 的块。如果选择了 8x8 模式，那么每个 8x8 的子宏块还可以进一步分割，如一块 8x8 的子宏块，两块 8x4 的子宏块，两块 4x8 的子宏块，或者四块 4x4 的子宏块。这种分割方式可以为每个宏块提供大量的组合可能性。</p>
<p>
    <figure>
      <img
        class="my-0 rounded-md"
        loading="lazy"
        srcset="
        /posts/intra-prediction-and-inter-prediction/image12_hu3562493274737725277.webp 330w,
        /posts/intra-prediction-and-inter-prediction/image12_hu11043714887083206214.webp 660w,
        /posts/intra-prediction-and-inter-prediction/image12_hu9987296201530550221.webp 1024w,
        /posts/intra-prediction-and-inter-prediction/image12_hu7507205541528680888.webp 2x"
        src="/posts/intra-prediction-and-inter-prediction/image12_hu11043714887083206214.webp"
        alt=""
      />
      
    </figure>
</p>
<p>每个分割或子宏块都需要一个单独的运动向量。这个运动向量必须被编码和传输，而且分割的选择也必须被编码进压缩比特流。因此，分割大小的选择对压缩性能有显著的影响。一般来说，对于帧的均匀区域，选择大的分割大小比较合适；而对于详细的区域，选择小的分割大小可能更有利。</p>
<p>
    <figure>
      <img
        class="my-0 rounded-md"
        loading="lazy"
        srcset="
        /posts/intra-prediction-and-inter-prediction/image13_hu13554111128531292561.webp 330w,
        /posts/intra-prediction-and-inter-prediction/image13_hu5458696693239708956.webp 660w,
        /posts/intra-prediction-and-inter-prediction/image13_hu14613380876979657243.webp 1024w,
        /posts/intra-prediction-and-inter-prediction/image13_hu13445748251511264671.webp 2x"
        src="/posts/intra-prediction-and-inter-prediction/image13_hu5458696693239708956.webp"
        alt=""
      />
      
    </figure>
</p>
<p>色度分量（Cb 和 Cr）在宏块中的分辨率是亮度分量（luma）的一半。每个色度块的分割方式和亮度分量相同，但是分割大小的水平和垂直分辨率正好是亮度分量的一半。例如，一个 8x16 的亮度分割对应一个 4x8 的色度分割；一个 8x4 的亮度分割对应一个 4x2 的色度分割，等等。每个运动向量的水平和垂直分量在应用到色度块时都会被减半。这和前面说的一样。</p>
<p>在实际的编码过程中，编码器会选择最佳的分割大小。例如，对于帧中变化不大的区域（残差看起来是灰色的），可以选择 16x16 的分割；而对于有详细运动的区域（残差看起来是黑色或白色的），小的分割可能更有效。</p>
<p>
    <figure>
      <img
        class="my-0 rounded-md"
        loading="lazy"
        srcset="
        /posts/intra-prediction-and-inter-prediction/image14_hu5021315693205404247.webp 330w,
        /posts/intra-prediction-and-inter-prediction/image14_hu15101079346426993805.webp 660w,
        /posts/intra-prediction-and-inter-prediction/image14_hu11248760705145471818.webp 1024w,
        /posts/intra-prediction-and-inter-prediction/image14_hu2949114058753230212.webp 2x"
        src="/posts/intra-prediction-and-inter-prediction/image14_hu15101079346426993805.webp"
        alt=""
      />
      
    </figure>
</p>
<p>运动补偿插值</p>
<p>在运动补偿中，我们需要从参考帧中找到一个与当前块相同大小的区域来进行预测。这个区域的位置由运动向量决定，运动向量在亮度分量上具有四分之一像素的精度，在色度分量上具有八分之一像素的精度。然而，参考帧中并不存在这种精度的样本，因此需要通过插值来生成这些样本。简单说，运动补偿是通过运动向量来实现的，运动向量描述了参考画面中的区域与当前画面块之间的位置偏移。不过，这个<strong>偏移量可能是一个小数</strong>，这意味着我们需要预测的画面块可能位于参考画面的像素之间。这时，我们就需要通过插值方法来生成这些不存在的像素。</p>
<p>插值的过程如下：</p>
<ol>
<li>首先，生成亮度分量中位于整数位置样本之间的半像素样本。这些样本是通过有限冲激响应（FIR）滤波器进行插值得到的，滤波器的权重为(1/32, -5/32, 5/8, 5/8, -5/32, 1/32)。例如，半像素样本 b 是通过六个水平整数样本 E, F, G, H, I 和 J 计算得到的。</li>
</ol>
<p>
    <figure>
      <img
        class="my-0 rounded-md"
        loading="lazy"
        srcset="
        /posts/intra-prediction-and-inter-prediction/image15_hu14146982897171350400.webp 330w,
        /posts/intra-prediction-and-inter-prediction/image15_hu11764968835067441037.webp 660w,
        /posts/intra-prediction-and-inter-prediction/image15_hu4025457964234283329.webp 1024w,
        /posts/intra-prediction-and-inter-prediction/image15_hu10766726621150056721.webp 2x"
        src="/posts/intra-prediction-and-inter-prediction/image15_hu11764968835067441037.webp"
        alt=""
      />
      
    </figure>
</p>
<ol>
<li>一旦计算出所有与整数样本水平和垂直相邻的半像素样本，就可以通过插值生成剩余的半像素位置的样本。</li>
<li>当所有的半像素样本都生成后，就可以通过线性插值生成四分之一像素位置的样本。</li>
</ol>
<p>
    <figure>
      <img
        class="my-0 rounded-md"
        loading="lazy"
        srcset="
        /posts/intra-prediction-and-inter-prediction/image16_hu13102368942917773068.webp 330w,
        /posts/intra-prediction-and-inter-prediction/image16_hu14857130578206537106.webp 660w,
        /posts/intra-prediction-and-inter-prediction/image16_hu5910906621316225247.webp 1024w,
        /posts/intra-prediction-and-inter-prediction/image16_hu90256049285174187.webp 2x"
        src="/posts/intra-prediction-and-inter-prediction/image16_hu14857130578206537106.webp"
        alt=""
      />
      
    </figure>
</p>
<ol>
<li>对于色度分量，由于采样率是 4:2:0，所以需要生成八分之一像素间隔的插值样本。这些样本是通过线性插值得到的，每个子样本位置 a 是相邻的四个整数样本位置 A、B、C 和 D 的线性组合。</li>
</ol>


<h3 class="relative group">运动向量计算 
    <div id="%E8%BF%90%E5%8A%A8%E5%90%91%E9%87%8F%E8%AE%A1%E7%AE%97" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E8%BF%90%E5%8A%A8%E5%90%91%E9%87%8F%E8%AE%A1%E7%AE%97" aria-label="锚点">#</a>
    </span>        
    
</h3>
<p>在视频编码中，运动向量（Motion Vector, MV）的主要作用是进行运动补偿预测（Motion Compensation Prediction）。这是一种利用视频序列中帧与帧之间的时间相关性来减少冗余的技术。</p>
<p>具体来说，当我们对一帧中的一个宏块（Macroblock, MB）或分区（Partition）进行编码时，我们可以在前一帧或后一帧中找到一个相似的宏块或分区作为参考，然后计算出这两个宏块或分区之间的运动向量。这个运动向量就表示了当前宏块或分区相对于参考宏块或分区的位置移动。</p>
<p>在视频编码中，对每个分区进行运动向量的编码可能会消耗大量的位数，特别是当选择较小的分区大小时。由于相邻分区的运动向量通常高度相关，因此每个运动向量都是根据附近已编码分区的向量进行预测的。首先形成一个预测向量 MVp，它是基于之前计算的运动向量形成的，然后编码并传输当前向量与预测向量之间的差值 MVD。</p>
<p>预测向量 MVp 的形成方法取决于运动补偿分区的大小以及附近向量的可用性。假设 E 是当前的宏块、宏块分区或子宏块分区，A 是 E 左边的分区或子分区，B 是 E 上方的分区或子分区，C 是 E 右上方的分区或子宏块分区。如果 E 左边有多个分区，选择最上面的一个作为 A。如果 E 上方有多个分区，选择最左边的一个作为 B。</p>
<p>
    <figure>
      <img
        class="my-0 rounded-md"
        loading="lazy"
        srcset="
        /posts/intra-prediction-and-inter-prediction/image17_hu5997654628294774835.webp 330w,
        /posts/intra-prediction-and-inter-prediction/image17_hu13810775428987539879.webp 660w,
        /posts/intra-prediction-and-inter-prediction/image17_hu12865682764738051618.webp 1024w,
        /posts/intra-prediction-and-inter-prediction/image17_hu12696786640375452228.webp 2x"
        src="/posts/intra-prediction-and-inter-prediction/image17_hu13810775428987539879.webp"
        alt=""
      />
      
    </figure>
</p>
<p>对于运动向量的预测和编码，规则如下：</p>
<ol>
<li>
<p>对于除 16×8 和 8×16 分区大小外的传输分区，预测向量 MVp 是分区 A、B 和 C 的运动向量的中值。</p>
</li>
<li>
<p>对于 16×8 的分区，上部 16×8 分区的预测向量 MVp 是根据 B 预测的，下部 16×8 分区的预测向量 MVp 是根据 A 预测的。</p>
</li>
<li>
<p>对于 8×16 的分区，左侧 8×16 分区的预测向量 MVp 是根据 A 预测的，右侧 8×16 分区的预测向量 MVp 是根据 C 预测的。</p>
</li>
<li>
<p>对于跳过的宏块，生成一个 16×16 的预测向量 MVp，就像上述情况 1 一样（即，就像块以 16×16 的 Inter 模式编码一样）。</p>
</li>
</ol>
<p>如果图 6.19 中显示的一个或多个先前传输的块不可用（例如，如果它在当前切片之外），则相应地修改预测向量 MVp 的选择。在解码器中，以同样的方式形成预测向量 MVp，并将其加到解码的向量差 MVD 中。在跳过的宏块的情况下，没有解码的向量差，使用预测向量 MVp 作为运动向量生成运动补偿宏块。</p>
<p>
    <figure>
      <img
        class="my-0 rounded-md"
        loading="lazy"
        srcset="
        /posts/intra-prediction-and-inter-prediction/image18_hu1993287938002015236.webp 330w,
        /posts/intra-prediction-and-inter-prediction/image18_hu15783474590997448990.webp 660w,
        /posts/intra-prediction-and-inter-prediction/image18_hu13149038778744161048.webp 1024w,
        /posts/intra-prediction-and-inter-prediction/image18_hu15767737326695837040.webp 2x"
        src="/posts/intra-prediction-and-inter-prediction/image18_hu15783474590997448990.webp"
        alt=""
      />
      
    </figure>
</p>
<p>“2,6”是运动向量，它们表示了一个宏块在参考帧中的相对位置。例如，“2,6” 表示这个宏块相对于参考帧的位置向右移动了 2 个像素，向下移动了 6 个像素。</p>
<p>&ldquo;=&gt;&rdquo; 后面的 &ldquo;0&rdquo; 表示的是参考的帧的索引。在这个例子中，参考帧的索引是 0，表示参考帧是当前帧的前一帧。</p>
<p>在视频编码中，为了节省位数，我们通常不直接编码运动向量，而是编码运动向量与预测向量的差值（MVD）。因为相邻的宏块的运动向量通常是高度相关的，所以这个差值通常会很小，需要的位数也就更少。</p>
<p>运动向量是用来进行运动补偿预测的，它表示的是宏块或分区在参考帧中的相对位置移动。但即使运动向量完全准确，也并不能保证所有的像素都能完全匹配。因为在视频序列中，除了物体的运动，还可能存在光照变化、物体形状的变化等因素，这些都可能导致即使运动补偿预测完全准确，也仍然存在一些像素的误差。</p>
<p>这些误差需要通过预测误差（residual）来进行纠正。预测误差是原始宏块与运动补偿预测宏块之间的差，它反映了运动补偿预测无法预测的部分。预测误差需要进行变换编码，然后与运动向量一起发送，以便在解码端进行解码和重建。</p>

  



<div
  
    class="flex px-4 py-3 rounded-md bg-primary-100 dark:bg-primary-900"
  >

  <span
    
      class="text-primary-400 ltr:pr-3 rtl:pl-3 flex items-center"
    >

    

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M506.3 417l-213.3-364c-16.33-28-57.54-28-73.98 0l-213.2 364C-10.59 444.9 9.849 480 42.74 480h426.6C502.1 480 522.6 445 506.3 417zM232 168c0-13.25 10.75-24 24-24S280 154.8 280 168v128c0 13.25-10.75 24-23.1 24S232 309.3 232 296V168zM256 416c-17.36 0-31.44-14.08-31.44-31.44c0-17.36 14.07-31.44 31.44-31.44s31.44 14.08 31.44 31.44C287.4 401.9 273.4 416 256 416z"/></svg>

  </span>


  </span>

  <span
    
      class="dark:text-neutral-300"
    ><strong>参考资料</strong>：本文内容主要参考了 H.264/AVC 标准文档和其他相关资料，如《H.264 and MPEG-4 Video Compression Video Coding for Next Generation Multimedia》等。本文中使用的程序是 VQ Analyser。</span>
</div>

<a id="github-428791f26de0d4cddd8b080d34c3b0f1" target="_blank" href="https://github.com/gaowanliang/web-video-thumbnailer" class="cursor-pointer">
  <div
    class="w-full md:w-auto pt-3 p-5 border border-neutral-200 dark:border-neutral-700 border rounded-md shadow-2xl">

    <div class="flex items-center">
      <span class="text-2xl text-neutral-800 dark:text-neutral" style="margin-right:10px;">
        

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>

  </span>


      </span>
      <div
        id="github-428791f26de0d4cddd8b080d34c3b0f1-full_name"
        class="m-0 font-bold text-xl text-neutral-800 decoration-primary-500 hover:underline hover:underline-offset-2 dark:text-neutral">
        gaowanliang/web-video-thumbnailer
      </div>
    </div>

    <p id="github-428791f26de0d4cddd8b080d34c3b0f1-description" class="m-0 mt-2 text-md text-neutral-800 dark:text-neutral">
      For a web video that can be downloaded in segments, it is possible to create an overview of the video by downloading only a small amount of binary data.
    </p>

    <div class="m-0 mt-2 flex items-center">

      <span class="mr-1 inline-block h-3 w-3 rounded-full"
        style="background-color: #3572A5"></span>
      <div class="m-0 mr-5 text-md text-neutral-800 dark:text-neutral">
         Python 
      </div>

      <span class="text-md mr-1 text-neutral-800 dark:text-neutral">
        

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="currentColor" d="M287.9 0C297.1 0 305.5 5.25 309.5 13.52L378.1 154.8L531.4 177.5C540.4 178.8 547.8 185.1 550.7 193.7C553.5 202.4 551.2 211.9 544.8 218.2L433.6 328.4L459.9 483.9C461.4 492.9 457.7 502.1 450.2 507.4C442.8 512.7 432.1 513.4 424.9 509.1L287.9 435.9L150.1 509.1C142.9 513.4 133.1 512.7 125.6 507.4C118.2 502.1 114.5 492.9 115.1 483.9L142.2 328.4L31.11 218.2C24.65 211.9 22.36 202.4 25.2 193.7C28.03 185.1 35.5 178.8 44.49 177.5L197.7 154.8L266.3 13.52C270.4 5.249 278.7 0 287.9 0L287.9 0zM287.9 78.95L235.4 187.2C231.9 194.3 225.1 199.3 217.3 200.5L98.98 217.9L184.9 303C190.4 308.5 192.9 316.4 191.6 324.1L171.4 443.7L276.6 387.5C283.7 383.7 292.2 383.7 299.2 387.5L404.4 443.7L384.2 324.1C382.9 316.4 385.5 308.5 391 303L476.9 217.9L358.6 200.5C350.7 199.3 343.9 194.3 340.5 187.2L287.9 78.95z"/></svg>
  </span>


      </span>
      <div id="github-428791f26de0d4cddd8b080d34c3b0f1-stargazers" class="m-0 mr-5 text-md text-neutral-800 dark:text-neutral">
        34
      </div>

      <span class="text-md mr-1 text-neutral-800 dark:text-neutral">
        

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M80 104c13.3 0 24-10.7 24-24s-10.7-24-24-24S56 66.7 56 80s10.7 24 24 24zm80-24c0 32.8-19.7 61-48 73.3V192c0 17.7 14.3 32 32 32H304c17.7 0 32-14.3 32-32V153.3C307.7 141 288 112.8 288 80c0-44.2 35.8-80 80-80s80 35.8 80 80c0 32.8-19.7 61-48 73.3V192c0 53-43 96-96 96H256v70.7c28.3 12.3 48 40.5 48 73.3c0 44.2-35.8 80-80 80s-80-35.8-80-80c0-32.8 19.7-61 48-73.3V288H144c-53 0-96-43-96-96V153.3C19.7 141 0 112.8 0 80C0 35.8 35.8 0 80 0s80 35.8 80 80zm208 24c13.3 0 24-10.7 24-24s-10.7-24-24-24s-24 10.7-24 24s10.7 24 24 24zM248 432c0-13.3-10.7-24-24-24s-24 10.7-24 24s10.7 24 24 24s24-10.7 24-24z"/></svg>
  </span>


      </span>
      <div id="github-428791f26de0d4cddd8b080d34c3b0f1-forks" class="m-0 mr-5 text-md text-neutral-800 dark:text-neutral">
        4
      </div>

    </div>

  </div>
  <script>
    fetch("https://api.github.com/repos/gaowanliang/web-video-thumbnailer", {
      headers: new Headers({
        'User-agent': 'Mozilla/4.0 Custom User Agent'
      })
    })
      .then(response => response.json())
      .then(data => {
        document.getElementById('github-428791f26de0d4cddd8b080d34c3b0f1-full_name').innerHTML = data.full_name;
        document.getElementById('github-428791f26de0d4cddd8b080d34c3b0f1-description').innerHTML = data.description;
        document.getElementById('github-428791f26de0d4cddd8b080d34c3b0f1-stargazers').innerHTML = data.stargazers_count;
        document.getElementById('github-428791f26de0d4cddd8b080d34c3b0f1-forks').innerHTML = data.forks;
      })
      .catch(error => console.error(error))
  </script>
</a>

          
          
          
        </div>
        
        

        
        
  
  <section class="flex flex-row flex-wrap justify-center pt-4 text-xl">
    
      
      <a
      target="_blank"
      class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800"
      href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://gwliang.com/posts/intra-prediction-and-inter-prediction/&amp;title=H.264%e5%b8%a7%e7%bc%96%e7%a0%81%e5%8e%9f%e7%90%86%e7%ae%80%e8%bf%b0%20-%20%e5%b8%a7%e5%86%85%e7%bc%96%e7%a0%81%e5%92%8c%e5%b8%a7%e9%97%b4%e7%bc%96%e7%a0%81"
      title="分享到 LinkedIn"
      aria-label="分享到 LinkedIn"
      >
      

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>

  </span>


    </a>
      
    
      
      <a
      target="_blank"
      class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800"
      href="https://twitter.com/intent/tweet/?url=https://gwliang.com/posts/intra-prediction-and-inter-prediction/&amp;text=H.264%e5%b8%a7%e7%bc%96%e7%a0%81%e5%8e%9f%e7%90%86%e7%ae%80%e8%bf%b0%20-%20%e5%b8%a7%e5%86%85%e7%bc%96%e7%a0%81%e5%92%8c%e5%b8%a7%e9%97%b4%e7%bc%96%e7%a0%81"
      title="分享到 Twitter"
      aria-label="分享到 Twitter"
      >
      

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"/></svg>
  </span>


    </a>
      
    
      
      <a
      target="_blank"
      class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800"
      href="https://api.whatsapp.com/send?text=https://gwliang.com/posts/intra-prediction-and-inter-prediction/&amp;resubmit=true&amp;title=H.264%e5%b8%a7%e7%bc%96%e7%a0%81%e5%8e%9f%e7%90%86%e7%ae%80%e8%bf%b0%20-%20%e5%b8%a7%e5%86%85%e7%bc%96%e7%a0%81%e5%92%8c%e5%b8%a7%e9%97%b4%e7%bc%96%e7%a0%81"
      title=""
      aria-label=""
      >
      

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"/></svg>

  </span>


    </a>
      
    
      
      <a
      target="_blank"
      class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800"
      href="https://pinterest.com/pin/create/bookmarklet/?url=https://gwliang.com/posts/intra-prediction-and-inter-prediction/&amp;description=H.264%e5%b8%a7%e7%bc%96%e7%a0%81%e5%8e%9f%e7%90%86%e7%ae%80%e8%bf%b0%20-%20%e5%b8%a7%e5%86%85%e7%bc%96%e7%a0%81%e5%92%8c%e5%b8%a7%e9%97%b4%e7%bc%96%e7%a0%81"
      title="钉到 Pinterest"
      aria-label="钉到 Pinterest"
      >
      

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M496 256c0 137-111 248-248 248-25.6 0-50.2-3.9-73.4-11.1 10.1-16.5 25.2-43.5 30.8-65 3-11.6 15.4-59 15.4-59 8.1 15.4 31.7 28.5 56.8 28.5 74.8 0 128.7-68.8 128.7-154.3 0-81.9-66.9-143.2-152.9-143.2-107 0-163.9 71.8-163.9 150.1 0 36.4 19.4 81.7 50.3 96.1 4.7 2.2 7.2 1.2 8.3-3.3.8-3.4 5-20.3 6.9-28.1.6-2.5.3-4.7-1.7-7.1-10.1-12.5-18.3-35.3-18.3-56.6 0-54.7 41.4-107.6 112-107.6 60.9 0 103.6 41.5 103.6 100.9 0 67.1-33.9 113.6-78 113.6-24.3 0-42.6-20.1-36.7-44.8 7-29.5 20.5-61.3 20.5-82.6 0-19-10.2-34.9-31.4-34.9-24.9 0-44.9 25.7-44.9 60.2 0 22 7.4 36.8 7.4 36.8s-24.5 103.8-29 123.2c-5 21.4-3 51.6-.9 71.2C65.4 450.9 0 361.1 0 256 0 119 111 8 248 8s248 111 248 248z"/></svg>

  </span>


    </a>
      
    
      
      <a
      target="_blank"
      class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800"
      href="https://reddit.com/submit/?url=https://gwliang.com/posts/intra-prediction-and-inter-prediction/&amp;resubmit=true&amp;title=H.264%e5%b8%a7%e7%bc%96%e7%a0%81%e5%8e%9f%e7%90%86%e7%ae%80%e8%bf%b0%20-%20%e5%b8%a7%e5%86%85%e7%bc%96%e7%a0%81%e5%92%8c%e5%b8%a7%e9%97%b4%e7%bc%96%e7%a0%81"
      title="提交到 Reddit"
      aria-label="提交到 Reddit"
      >
      

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M201.5 305.5c-13.8 0-24.9-11.1-24.9-24.6 0-13.8 11.1-24.9 24.9-24.9 13.6 0 24.6 11.1 24.6 24.9 0 13.6-11.1 24.6-24.6 24.6zM504 256c0 137-111 248-248 248S8 393 8 256 119 8 256 8s248 111 248 248zm-132.3-41.2c-9.4 0-17.7 3.9-23.8 10-22.4-15.5-52.6-25.5-86.1-26.6l17.4-78.3 55.4 12.5c0 13.6 11.1 24.6 24.6 24.6 13.8 0 24.9-11.3 24.9-24.9s-11.1-24.9-24.9-24.9c-9.7 0-18 5.8-22.1 13.8l-61.2-13.6c-3-.8-6.1 1.4-6.9 4.4l-19.1 86.4c-33.2 1.4-63.1 11.3-85.5 26.8-6.1-6.4-14.7-10.2-24.1-10.2-34.9 0-46.3 46.9-14.4 62.8-1.1 5-1.7 10.2-1.7 15.5 0 52.6 59.2 95.2 132 95.2 73.1 0 132.3-42.6 132.3-95.2 0-5.3-.6-10.8-1.9-15.8 31.3-16 19.8-62.5-14.9-62.5zM302.8 331c-18.2 18.2-76.1 17.9-93.6 0-2.2-2.2-6.1-2.2-8.3 0-2.5 2.5-2.5 6.4 0 8.6 22.8 22.8 87.3 22.8 110.2 0 2.5-2.2 2.5-6.1 0-8.6-2.2-2.2-6.1-2.2-8.3 0zm7.7-75c-13.6 0-24.6 11.1-24.6 24.9 0 13.6 11.1 24.6 24.6 24.6 13.8 0 24.9-11.1 24.9-24.6 0-13.8-11-24.9-24.9-24.9z"/></svg>

  </span>


    </a>
      
    
      
      <a
      target="_blank"
      class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800"
      href="https://www.facebook.com/sharer/sharer.php?u=https://gwliang.com/posts/intra-prediction-and-inter-prediction/&amp;quote=H.264%e5%b8%a7%e7%bc%96%e7%a0%81%e5%8e%9f%e7%90%86%e7%ae%80%e8%bf%b0%20-%20%e5%b8%a7%e5%86%85%e7%bc%96%e7%a0%81%e5%92%8c%e5%b8%a7%e9%97%b4%e7%bc%96%e7%a0%81"
      title="分享到 Facebook"
      aria-label="分享到 Facebook"
      >
      

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"/></svg>

  </span>


    </a>
      
    
      
      <a
      target="_blank"
      class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800"
      href="mailto:?body=https://gwliang.com/posts/intra-prediction-and-inter-prediction/&amp;subject=H.264%e5%b8%a7%e7%bc%96%e7%a0%81%e5%8e%9f%e7%90%86%e7%ae%80%e8%bf%b0%20-%20%e5%b8%a7%e5%86%85%e7%bc%96%e7%a0%81%e5%92%8c%e5%b8%a7%e9%97%b4%e7%bc%96%e7%a0%81"
      title="通过电子邮件发送"
      aria-label="通过电子邮件发送"
      >
      

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M207.8 20.73c-93.45 18.32-168.7 93.66-187 187.1c-27.64 140.9 68.65 266.2 199.1 285.1c19.01 2.888 36.17-12.26 36.17-31.49l.0001-.6631c0-15.74-11.44-28.88-26.84-31.24c-84.35-12.98-149.2-86.13-149.2-174.2c0-102.9 88.61-185.5 193.4-175.4c91.54 8.869 158.6 91.25 158.6 183.2l0 16.16c0 22.09-17.94 40.05-40 40.05s-40.01-17.96-40.01-40.05v-120.1c0-8.847-7.161-16.02-16.01-16.02l-31.98 .0036c-7.299 0-13.2 4.992-15.12 11.68c-24.85-12.15-54.24-16.38-86.06-5.106c-38.75 13.73-68.12 48.91-73.72 89.64c-9.483 69.01 43.81 128 110.9 128c26.44 0 50.43-9.544 69.59-24.88c24 31.3 65.23 48.69 109.4 37.49C465.2 369.3 496 324.1 495.1 277.2V256.3C495.1 107.1 361.2-9.332 207.8 20.73zM239.1 304.3c-26.47 0-48-21.56-48-48.05s21.53-48.05 48-48.05s48 21.56 48 48.05S266.5 304.3 239.1 304.3z"/></svg>

  </span>


    </a>
      
    
  </section>


          
      </div>
     
      
      
        
        
          
          
        
          
          
        
      <script>
        var oid = "views_posts\/intra-prediction-and-inter-prediction\/index.md"
        var oid_likes = "likes_posts\/intra-prediction-and-inter-prediction\/index.md"
      </script>
      
      
      <script type="text/javascript" src="/js/page.min.0860cf4e04fa2d72cc33ddba263083464d48f67de06114529043cb4623319efed4f484fd7f1730df5abea0e2da6f3538855634081d02f2d6e920b956f063e823.js" integrity="sha512-CGDPTgT6LXLMM926JjCDRk1I9n3gYRRSkEPLRiMxnv7U9IT9fxcw31q&#43;oOLabzU4hVY0CB0C8tbpILlW8GPoIw=="></script>
      
  
    </section>
  <footer class="pt-8 max-w-prose print:hidden">

    
  
    
    
    
    <div class="pt-8">
      <hr class="border-dotted border-neutral-300 dark:border-neutral-600" />
      <div class="flex justify-between pt-3">
        <span>
          
            <a class="flex group mr-3" href="/posts/er-jin-zhi-suan-fa-zhong-de-jin-wei-he-yi-chu/">
              <span
                class="mr-3 text-neutral-700 group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400"
                >&larr;</span
              >
              <span
                class="ml-3 text-neutral-700 group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400"
                >&rarr;</span
              >
              <span class="flex flex-col">
                <span
                  class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500"
                  >二进制算法中的进位(CARRY)标志和溢出(OVERFLOW)标志</span
                >
                <span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400">
                  
                    <time datetime="2023-05-25T11:47:00&#43;00:00">2023年5月25日</time>
                  
                </span>
              </span>
            </a>
          
        </span>
        <span>
          
            <a class="flex text-right group ml-3" href="/posts/cimbar-introduction/">
              <span class="flex flex-col">
                <span
                  class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500"
                  >用摄像头传输文件 —— Cimbar</span
                >
                <span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400">
                  
                    <time datetime="2024-09-09T00:00:00&#43;00:00">2024年9月9日</time>
                  
                </span>
              </span>
              <span
                class="ml-3 text-neutral-700 group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400"
                >&rarr;</span
              >
              <span
                class="mr-3 text-neutral-700 group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400"
                >&larr;</span
              >
            </a>
          
        </span>
      </div>
    </div>
  


    
    
    <div class="pt-3">
      <hr class="border-dotted border-neutral-300 dark:border-neutral-600" />
      <div class="pt-3">
        
<div id="lv-container" data-id="city" data-uid="MTAyMC80Njc4NC8yMzI4NQ==">
    <script type="text/javascript">
        (function (d, s) {
            var j, e = d.getElementsByTagName(s)[0];

            if (typeof LivereTower === 'function') { return; }

            j = d.createElement(s);
            j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
            j.async = true;

            e.parentNode.insertBefore(j, e);
        })(document, 'script');
    </script>
    <noscript>为正常使用来必力评论功能请激活JavaScript</noscript>
</div>
<style>
    #taboola-livere {
        display: none;
    }
</style>

      </div>
    </div>
    
    
  </footer>
</article>

      <div id="top-scroller" class="pointer-events-none absolute top-[110vh] bottom-0 w-12 ltr:right-0 rtl:left-0">
  <a href="#the-top"
    class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 mb-16 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400"
    aria-label="返回顶部" title="返回顶部">
    &uarr;
  </a>
</div>
    </main><footer id="site-footer" class="py-10 print:hidden">
  
  
    
    <nav class="flex flex-row pb-4 text-base font-medium text-neutral-500 dark:text-neutral-400">
      <ul class="flex flex-col list-none sm:flex-row">
        
        <li class="flex mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0">
          <a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2 flex items-center" href="/tags/"
            title="Tags">
            
            标签
          </a>
        </li>
        
      </ul>
    </nav>
    
  
  <div class="flex items-center justify-between">

    
    
    <p class="text-sm text-neutral-500 dark:text-neutral-400">
      &copy;
      2025
      高玩梁
    </p>
    

    
    
    <p class="text-xs text-neutral-500 dark:text-neutral-400">
      
      
      由 <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500"
        href="https://gohugo.io/" target="_blank" rel="noopener noreferrer">Hugo</a> &amp; <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500"
        href="https://blowfish.page/" target="_blank" rel="noopener noreferrer">Blowfish</a> 强力驱动
    </p>
    

  </div>
  <script>
    
    mediumZoom(document.querySelectorAll("img:not(.nozoom)"), {
      margin: 24,
      background: 'rgba(0,0,0,0.5)',
      scrollOffset: 0,
    })
    
  </script>
  
  
  <script type="text/javascript" src="/js/process.min.ee03488f19c93c2efb199e2e3014ea5f3cb2ce7d45154adb3399a158cac27ca52831db249ede5bb602700ef87eb02434139de0858af1818ab0fb4182472204a4.js" integrity="sha512-7gNIjxnJPC77GZ4uMBTqXzyyzn1FFUrbM5mhWMrCfKUoMdsknt5btgJwDvh&#43;sCQ0E53ghYrxgYqw&#43;0GCRyIEpA=="></script>
  
  
</footer>
<div
  id="search-wrapper"
  class="invisible fixed inset-0 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh]"
  data-url="https://gwliang.com/"
  style="z-index:500"
>
  <div
    id="search-modal"
    class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800"
  >
    <header class="relative z-10 flex items-center justify-between flex-none px-2">
      <form class="flex items-center flex-auto min-w-0">
        <div class="flex items-center justify-center w-8 h-8 text-neutral-400">
          

  <span class="relative block icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>

  </span>


        </div>
        <input
          type="search"
          id="search-query"
          class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent"
          placeholder="搜索"
          tabindex="0"
        />
      </form>
      <button
        id="close-search-button"
        class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400"
        title="关闭 (Esc)"
      >
        

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>

  </span>


      </button>
    </header>
    <section class="flex-auto px-2 overflow-auto">
      <ul id="search-results">
        
      </ul>
    </section>
  </div>
</div>

  </div>
</body>

</html>
